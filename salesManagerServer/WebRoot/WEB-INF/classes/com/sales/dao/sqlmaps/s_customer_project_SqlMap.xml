<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="s_customer_project" >
  <resultMap id="SCustomerProjectResult" class="com.sales.model.SCustomerProject" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jun 27 16:47:57 CST 2013.
    -->
    <result column="project_id" property="projectId" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="customer_id" property="customerId" jdbcType="INTEGER" />
    <result column="start_time" property="startTime" jdbcType="TIMESTAMP" />
    <result column="plan_end_time" property="planEndTime" jdbcType="TIMESTAMP" />
    <result column="amount" property="amount" jdbcType="INTEGER" />
    <result column="evaluation_saler" property="evaluationSaler" jdbcType="INTEGER" />
    <result column="evaluation_manager" property="evaluationManager" jdbcType="INTEGER" />
    <result column="evaluation_gen" property="evaluationGen" jdbcType="INTEGER" />
    <result column="use_partion" property="usePartion" jdbcType="VARCHAR" />
    <result column="use_attention" property="useAttention" jdbcType="VARCHAR" />
    <result column="using_status" property="usingStatus" jdbcType="VARCHAR" />
    <result column="problem" property="problem" jdbcType="VARCHAR" />
    <result column="solution" property="solution" jdbcType="VARCHAR" />
    <result column="customer_name" property="customerName" jdbcType="VARCHAR" />
    <result column="linkman_id" property="linkmanId" jdbcType="INTEGER" />
    <result column="linkman_name" property="linkmanName" jdbcType="VARCHAR" />
    <result column="create_user_id" property="createUserId" jdbcType="VARCHAR" />
    <result column="user_name" property="createUserName" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="selectByPrimaryKey" resultMap="SCustomerProjectResult" parameterClass="com.sales.model.SCustomerProject" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jun 27 16:47:57 CST 2013.
    -->
    select p.project_id, p.name, p.customer_id, p.start_time, p.plan_end_time, p.amount, p.evaluation_saler,
      p.evaluation_manager, p.evaluation_gen, p.use_partion, p.use_attention, p.using_status, p.problem,
      p.solution, p.linkman_id, c.FFullName as customer_name, lm.name as linkman_name, 
      p.create_user_id, u.user_name
    from s_customer_project p
    left join t_customer c on p.customer_id = c.customer_id
    left join s_customer_linkman lm on p.linkman_id = lm.linkman_id
    left join s_user u on p.create_user_id = u.user_id
    where p.project_id = #projectId:INTEGER#
  </select>
  
  <delete id="deleteByPrimaryKey" parameterClass="com.sales.model.SCustomerProject" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jun 27 16:47:57 CST 2013.
    -->
    delete from s_customer_project
    where project_id = #projectId:INTEGER#
  </delete>
  
  <insert id="insert" parameterClass="com.sales.model.SCustomerProject" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jun 27 16:47:57 CST 2013.
    -->
    insert into s_customer_project (project_id, name, customer_id, start_time, plan_end_time,
      amount, evaluation_saler, evaluation_manager, evaluation_gen, use_partion, use_attention,
      using_status, problem, solution,linkman_id, create_user_id)
    values (#projectId:INTEGER#, #name:VARCHAR#, #customerId:INTEGER#, #startTime:TIMESTAMP#,
      #planEndTime:TIMESTAMP#, #amount:INTEGER#, #evaluationSaler:INTEGER#, #evaluationManager:INTEGER#,
      #evaluationGen:INTEGER#, #usePartion:VARCHAR#, #useAttention:VARCHAR#, #usingStatus:VARCHAR#,
      #problem:VARCHAR#, #solution:VARCHAR#,#linkmanId:INTEGER#, #createUserId:INTEGER#)
  </insert>
  
  <update id="updateByPrimaryKey" parameterClass="com.sales.model.SCustomerProject" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jun 27 16:47:57 CST 2013.
    -->
    update s_customer_project
    set name = #name:VARCHAR#,
      customer_id = #customerId:INTEGER#,
      start_time = #startTime:TIMESTAMP#,
      plan_end_time = #planEndTime:TIMESTAMP#,
      amount = #amount:INTEGER#,
      evaluation_saler = #evaluationSaler:INTEGER#,
      evaluation_manager = #evaluationManager:INTEGER#,
      evaluation_gen = #evaluationGen:INTEGER#,
      use_partion = #usePartion:VARCHAR#,
      use_attention = #useAttention:VARCHAR#,
      using_status = #usingStatus:VARCHAR#,
      problem = #problem:VARCHAR#,
      solution = #solution:VARCHAR#,
      linkman_id = #linkmanId:INTEGER#
    where project_id = #projectId:INTEGER#
  </update>
  
  <update id="updateByPrimaryKeySelective" parameterClass="com.sales.model.SCustomerProject" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jun 27 16:47:57 CST 2013.
    -->
    update s_customer_project
    <dynamic prepend="set" >
      <isNotNull prepend="," property="name" >
        name = #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerId" >
        customer_id = #customerId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="startTime" >
        start_time = #startTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="planEndTime" >
        plan_end_time = #planEndTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="amount" >
        amount = #amount:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="evaluationSaler" >
        evaluation_saler = #evaluationSaler:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="evaluationManager" >
        evaluation_manager = #evaluationManager:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="evaluationGen" >
        evaluation_gen = #evaluationGen:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="usePartion" >
        use_partion = #usePartion:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="useAttention" >
        use_attention = #useAttention:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="usingStatus" >
        using_status = #usingStatus:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="problem" >
        problem = #problem:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="solution" >
        solution = #solution:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="solution" >
        linkman_id = #linkmanId:INTEGER#
      </isNotNull>
    </dynamic>
    where project_id = #projectId:INTEGER#
  </update>
  
  <select id="getCustomerProjectListByCustomerId" resultMap="SCustomerProjectResult" parameterClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jun 27 16:47:57 CST 2013.
    -->
    select p.project_id, p.name, p.customer_id, p.start_time, p.plan_end_time, p.amount, p.evaluation_saler,
      p.evaluation_manager, p.evaluation_gen, p.use_partion, p.use_attention, p.using_status, p.problem,
      p.solution, p.linkman_id, c.FFullName as customer_name, lm.name as linkman_name,
      p.create_user_id, u.user_name
    from s_customer_project p
	    left join t_customer c on p.customer_id = c.customer_id
	    left join s_customer_linkman lm on p.linkman_id = lm.linkman_id
	    left join s_user u on p.create_user_id = u.user_id
    where p.customer_id = #customerId:INTEGER#
    order by p.start_time desc
  </select>
  
  <select id="getCustomerProjectCount" resultClass="java.lang.Integer"  parameterClass="java.util.Map">
      select count(*) 
      from s_customer_project p
      	left join t_customer c on p.customer_id = c.customer_id
      	left join s_user u on p.create_user_id = u.user_id
      <isNotNull prepend="where" property="name" >
        p.name like '%$name$%'
      </isNotNull>
      <isNotNull prepend="where" property="customerName" >
        c.fname like '%$customerName$%'
      </isNotNull>
      <isNotNull prepend="where" property="createUser" >
        u.user_name like '%$createUser$%'
      </isNotNull>
  </select>
  
  <select id="selectCPlist" resultMap="SCustomerProjectResult" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jun 27 16:47:57 CST 2013.
    -->
    select p.project_id, p.name, p.customer_id, p.start_time, p.plan_end_time, p.amount, p.evaluation_saler,
      p.evaluation_manager, p.evaluation_gen, p.use_partion, p.use_attention, p.using_status, p.problem,
      p.solution, p.linkman_id, c.FFullName as customer_name, lm.name as linkman_name,
      p.create_user_id, u.user_name
    from s_customer_project p
	    left join t_customer c on p.customer_id = c.customer_id
	    left join s_customer_linkman lm on p.linkman_id = lm.linkman_id
	    left join s_user u on p.create_user_id = u.user_id
    <isNotNull prepend="where" property="name" >
        p.name like '%$name$%'
      </isNotNull>
      <isNotNull prepend="where" property="customerName" >
        c.fname like '%$customerName$%'
      </isNotNull>
      <isNotNull prepend="where" property="createUser" >
        u.user_name like '%$createUser$%'
      </isNotNull>
    limit #startRow#,#endRow#
  </select>
  
  <select id="selectCPlistByCustomerIds" resultMap="SCustomerProjectResult" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jun 27 16:47:57 CST 2013.
    -->
    select p.project_id, p.name, p.customer_id, p.start_time, p.plan_end_time, p.amount, p.evaluation_saler,
      p.evaluation_manager, p.evaluation_gen, p.use_partion, p.use_attention, p.using_status, p.problem,
      p.solution, p.linkman_id, c.FFullName as customer_name, lm.name as linkman_name,
      p.create_user_id, u.user_name
    from s_customer_project p
	    left join t_customer c on p.customer_id = c.customer_id
	    left join s_customer_linkman lm on p.linkman_id = lm.linkman_id
	    left join s_user u on p.create_user_id = u.user_id
    where p.customer_id in $customerIds$
    <isNotNull prepend="and" property="name" >
        p.name like '%$name$%'
     </isNotNull>
     <isNotNull prepend="and" property="customerName" >
        c.fname like '%$customerName$%'
     </isNotNull>
     <isNotNull prepend="and" property="createUser" >
        u.user_name like '%$createUser$%'
     </isNotNull>
    order by p.start_time desc
    limit #startRow#,#endRow#
  </select>
  
  <select id="getCPCountByCustomerIds" resultClass="java.lang.Integer"  parameterClass="java.util.Map">
      select count(*) 
      from s_customer_project p 
      	left join t_customer c on p.customer_id = c.customer_id
      	left join s_user u on p.create_user_id = u.user_id
      where p.customer_id in $customerIds$
      <isNotNull prepend="and" property="name" >
        p.name like '%$name$%'
      </isNotNull>
      <isNotNull prepend="and" property="customerName" >
        c.fname like '%$customerName$%'
     </isNotNull>
     <isNotNull prepend="and" property="createUser" >
        u.user_name like '%$createUser$%'
     </isNotNull>
  </select>
</sqlMap>