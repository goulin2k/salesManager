<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="s_performance_item" >
  <resultMap id="SPerformanceItemResult" class="com.sales.model.SPerformanceItem" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed May 15 09:36:54 CST 2013.
    -->
    <result column="item_id" property="itemId" jdbcType="INTEGER" />
    <result column="sql_id" property="sqlId" jdbcType="INTEGER" />
    <result column="resource_id" property="resourceId" jdbcType="INTEGER" />
    <result column="item_name" property="itemName" jdbcType="VARCHAR" />
    <result column="assess_method" property="assessMethod" jdbcType="VARCHAR" />
    <result column="measurement_unit" property="measurementUnit" jdbcType="VARCHAR" />
    <result column="comment" property="comment" jdbcType="VARCHAR" />
    <result column="access_post_id" property="accessPostId" jdbcType="INTEGER" />
    <result column="post_type" property="postType" jdbcType="INTEGER" />
    <result column="positionName" property="accessPostName" jdbcType="VARCHAR" />
    <result column="sqlName" property="sqlName" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="SPerformanceItemWeightResult" class="com.sales.model.SPerformanceItem" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed May 15 09:36:54 CST 2013.
    -->
    <result column="item_id" property="itemId" jdbcType="INTEGER" />
    <result column="sql_id" property="sqlId" jdbcType="INTEGER" />
    <result column="resource_id" property="resourceId" jdbcType="INTEGER" />
    <result column="item_name" property="itemName" jdbcType="VARCHAR" />
    <result column="assess_method" property="assessMethod" jdbcType="VARCHAR" />
    <result column="measurement_unit" property="measurementUnit" jdbcType="VARCHAR" />
    <result column="comment" property="comment" jdbcType="VARCHAR" />
    <result column="access_post_id" property="accessPostId" jdbcType="INTEGER" />
    <result column="post_type" property="postType" jdbcType="INTEGER" />
    <result column="positionName" property="accessPostName" jdbcType="VARCHAR" />
    <result column="sqlName" property="sqlName" jdbcType="VARCHAR" />
    <result column="specific_weight" property="specificWeight" jdbcType="INTEGER" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="SPerformanceItemResult" parameterClass="com.sales.model.SPerformanceItem" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed May 15 09:36:54 CST 2013.
    -->
    select i.item_id, i.sql_id, i.resource_id, i.item_name, i.assess_method, 
    i.measurement_unit, i.comment,i.access_post_id, i.post_type, p.name as positionName, 
    q.name as sqlName  
    from s_performance_item i left join s_position p on i.access_post_id = p.position_id 
    left join s_performance_sql q on i.sql_id = q.sql_id 
    where i.item_id = #itemId:INTEGER#
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="com.sales.model.SPerformanceItem" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed May 15 09:36:54 CST 2013.
    -->
    delete from s_performance_item
    where item_id = #itemId:INTEGER#
  </delete>
  <insert id="insert" parameterClass="com.sales.model.SPerformanceItem" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed May 15 09:36:54 CST 2013.
    -->
    insert into s_performance_item (item_id, sql_id, resource_id, item_name, assess_method,
      measurement_unit, comment, access_post_id, post_type)
    values (#itemId:INTEGER#, #sqlId:INTEGER#, #resourceId:INTEGER#, #itemName:VARCHAR#,
      #assessMethod:VARCHAR#, #measurementUnit:VARCHAR#, #comment:VARCHAR#, #accessPostId:INTEGER#,
      #postType:INTEGER#)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="com.sales.model.SPerformanceItem" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed May 15 09:36:54 CST 2013.
    -->
    update s_performance_item
    set sql_id = #sqlId:INTEGER#,
      resource_id = #resourceId:INTEGER#,
      item_name = #itemName:VARCHAR#,
      assess_method = #assessMethod:VARCHAR#,
      measurement_unit = #measurementUnit:VARCHAR#,
      comment = #comment:VARCHAR#,
      access_post_id = #accessPostId:INTEGER#,
      post_type = #postType:INTEGER#
    where item_id = #itemId:INTEGER#
  </update>
  <update id="updateByPrimaryKeySelective" parameterClass="com.sales.model.SPerformanceItem" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed May 15 09:36:54 CST 2013.
    -->
    update s_performance_item
    <dynamic prepend="set" >
      <isNotNull prepend="," property="sqlId" >
        sql_id = #sqlId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="resourceId" >
        resource_id = #resourceId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="itemName" >
        item_name = #itemName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="assessMethod" >
        assess_method = #assessMethod:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="measurementUnit" >
        measurement_unit = #measurementUnit:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="comment" >
        comment = #comment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="accessPostId" >
        access_post_id = #accessPostId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="postType" >
        post_type = #postType:INTEGER#
      </isNotNull>
    </dynamic>
    where item_id = #itemId:INTEGER#
  </update>
  
  <select id="getItemListPage" resultMap="SPerformanceItemResult" parameterClass="com.sales.model.SPerformanceItem" >
    select i.item_id, i.sql_id, i.resource_id, i.item_name, i.assess_method, 
    i.measurement_unit, i.comment,i.access_post_id, i.post_type, p.name as positionName, 
    q.name as sqlName   
    from s_performance_item  i left join s_position p on i.access_post_id = p.position_id  
    left join s_performance_sql q on i.sql_id = q.sql_id 
    <dynamic prepend="where">
		<isNotEmpty prepend="and" property="itemName">
			i.item_name like '%$itemName$%' 
		</isNotEmpty>
	</dynamic>
	<dynamic prepend="limit">
		<isNotNull property="pageStart">
			<isNotNull property="pageSize">#pageStart#, #pageSize#</isNotNull>
		</isNotNull>
	</dynamic>
  </select>
  
  <select id="getItemListPageCount" resultClass="java.lang.Integer" parameterClass="com.sales.model.SPerformanceItem" >
    select count(item_id) 
    from s_performance_item i left join s_position p on i.access_post_id = p.position_id  
    left join s_performance_sql q on i.sql_id = q.sql_id 
    <dynamic prepend="where">
		<isNotEmpty prepend="and" property="itemName">
			i.item_name like '%$itemName$%' 
		</isNotEmpty>
	</dynamic>
  </select>
  
  <select id="getPlanItemList" resultMap="SPerformanceItemWeightResult"  parameterClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed May 15 09:36:54 CST 2013.
    -->
    select s.item_id, s.sql_id, s.resource_id, s.item_name, s.assess_method, 
    s.measurement_unit, s.comment,s.access_post_id, s.post_type, 
    p.name as positionName, i.specific_weight, q.name as sqlName  
    from s_plan_item i left join s_performance_item s on i.item_id = s.item_id 
    left join s_position p on s.access_post_id = p.position_id  
    left join s_performance_sql q on s.sql_id = q.sql_id 
    where i.plan_id = #planId:INTEGER#
  </select>
</sqlMap>